% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/misc_functions.R
\name{read_parquet_dt}
\alias{read_parquet_dt}
\title{Read Parquet (partitioned dataset or single file) via Arrow, optionally filter/project, return data.table}
\usage{
read_parquet_dt(
  path,
  cols = NULL,
  filter = NULL,
  partitioning = "hive",
  as_data_table = TRUE
)
}
\arguments{
\item{path}{Character scalar (directory or file) OR character vector of parquet files.}

\item{cols}{Optional character vector of columns to keep (projection). NULL keeps all.}

\item{filter}{Optional row filter as an arrow::Expression.
Use `arrow::Expression$field_ref("colname")` to reference columns.
Example: `arrow::Expression$field_ref("year") >= 2018`}

\item{partitioning}{Partitioning spec for datasets. Default "hive" is typical for col=value/ layouts.
If opening fails with this, the function automatically retries without partitioning.}

\item{as_data_table}{Logical; if TRUE returns data.table; if FALSE returns data.frame.}
}
\value{
data.table (default) or data.frame
}
\description{
Read Parquet (partitioned dataset or single file) via Arrow, optionally filter/project, return data.table
}
\examples{
\dontrun{
# Single file:
dt <- read_parquet_dt("./data/myfile.parquet")

# Partitioned dataset directory with column selection:
dt <- read_parquet_dt(
  "./inputs/exposure_distributions/smok_status_table",
  cols = c("patid", "year", "smoke_status")
)

# With filter (requires arrow expressions):
dt <- read_parquet_dt(
  "./data/myfile.parquet",
  filter = arrow::Expression$field_ref("age") >= 40
)
}
}
